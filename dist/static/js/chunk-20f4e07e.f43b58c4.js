(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20f4e07e"],{"01c9":function(e,t,a){},1751:function(e,t,a){"use strict";var s=a("01c9"),n=a.n(s);n.a},4395:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return l}),a.d(t,"c",function(){return i});var s=a("b775");function n(e){return Object(s["a"])({url:"/zgBusiness/condition/pager/all",method:"post",params:e})}function l(e){return Object(s["a"])({url:"/zgBusiness/condition/pager/vo",method:"post",params:e})}function i(e){return Object(s["a"])({url:"zgBusiness/update",method:"post",params:e})}},"90a8":function(e,t,a){"use strict";a.d(t,"i",function(){return n}),a.d(t,"h",function(){return l}),a.d(t,"k",function(){return i}),a.d(t,"g",function(){return r}),a.d(t,"d",function(){return o}),a.d(t,"b",function(){return u}),a.d(t,"c",function(){return c}),a.d(t,"l",function(){return d}),a.d(t,"m",function(){return p}),a.d(t,"a",function(){return f}),a.d(t,"o",function(){return b}),a.d(t,"e",function(){return m}),a.d(t,"j",function(){return h}),a.d(t,"n",function(){return v}),a.d(t,"f",function(){return g});var s=a("b775");function n(e){return Object(s["a"])({url:"/zgCompany/all/condition/pager",method:"post",params:e})}function l(){return Object(s["a"])({baseURL:"http://192.168.91.112:10006/api/v1/sysDept/getDeptTreeListBySysId",method:"get"})}function i(e){return Object(s["a"])({baseURL:"http://192.168.91.112:10006/api/v1/sysUser/getSysUserListByDeptIds",method:"post",data:e})}function r(){return Object(s["a"])({baseURL:"http://192.168.91.112:10006/api/v1/sysUser/getCurrentUserDeptUsers",method:"get"})}function o(e){return Object(s["a"])({url:"/zgCompany/collectCompanyToOther",method:"post",params:e})}function u(e){return Object(s["a"])({url:"/zgCompany/changeCompanyToOther",method:"post",params:e})}function c(e){return Object(s["a"])({url:"/zgCompany/checkCompany",method:"post",params:e})}function d(e){return Object(s["a"])({url:"/zgUserPrivate/condition",method:"post",params:e})}function p(e){return Object(s["a"])({url:"/tag/all/list",method:"post",params:e})}function f(e){return Object(s["a"])({url:"/tag/save",method:"post",params:e})}function b(e){return Object(s["a"])({url:"/tag/update",method:"post",params:e})}function m(e){return Object(s["a"])({url:"/tag/delete",method:"post",params:e})}function h(e){return Object(s["a"])({baseURL:"http://data.zhiguoguo.net/parent/info",method:"post",params:e})}function v(e){return Object(s["a"])({baseURL:"http://data.zhiguoguo.net/trade/mark/info",method:"post",params:e})}function g(e){return Object(s["a"])({baseURL:"http://data.zhiguoguo.net/commerce/info",method:"post",params:e})}},"9c69":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleTabs},model:{value:e.activeTabsName,callback:function(t){e.activeTabsName=t},expression:"activeTabsName"}},[a("el-tab-pane",{attrs:{label:"有效商机",name:"1"}},[a("business-list-table",{attrs:{"list-data":e.listData,"active-tabs-name":e.activeTabsName,"search-data":e.searchData,"dept-ids-visible":e.deptIds},on:{"update:deptIdsVisible":function(t){e.deptIds=t},"update:dept-ids-visible":function(t){e.deptIds=t},fetchData:e.fetchData}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"被释放商机",name:"2"}},[a("business-list-table",{attrs:{"list-data":e.listData,"active-tabs-name":e.activeTabsName,"search-data":e.searchData,"dept-ids-visible":e.deptIds},on:{"update:deptIdsVisible":function(t){e.deptIds=t},"update:dept-ids-visible":function(t){e.deptIds=t},fetchData:e.fetchData}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"无效商机",name:"3"}},[a("business-list-table",{attrs:{"list-data":e.listData,"active-tabs-name":e.activeTabsName,"search-data":e.searchData,"dept-ids-visible":e.deptIds},on:{"update:deptIdsVisible":function(t){e.deptIds=t},"update:dept-ids-visible":function(t){e.deptIds=t},fetchData:e.fetchData}})],1)],1)],1)},n=[],l=(a("ac6a"),a("6b54"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customer-list-table"},[a("el-form",{attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{label:"部门："}},[a("el-cascader",{attrs:{props:e.propsDeptId,options:e.searchData.deptTreeList,"show-all-levels":!1,clearable:"",placeholder:"请选择部门"},on:{change:e.handleDeptTree},model:{value:e.selectDeptId,callback:function(t){e.selectDeptId=t},expression:"selectDeptId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"顾问："}},[a("el-select",{attrs:{value:"",filterable:"",placeholder:"请选择的顾问",clearable:""},model:{value:e.formInline.businessOwner,callback:function(t){e.$set(e.formInline,"businessOwner",t)},expression:"formInline.businessOwner"}},e._l(e.userList,function(e){return a("el-option",{key:e.pkSid,attrs:{label:e.nickname,value:e.pkSid}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"意向业务："}},[a("el-select",{attrs:{placeholder:"请选择意向业务",clearable:""},model:{value:e.formInline.businessPurpose,callback:function(t){e.$set(e.formInline,"businessPurpose",t)},expression:"formInline.businessPurpose"}},[a("el-option",{attrs:{label:"全部",value:"-1"}}),e._v(" "),a("el-option",{attrs:{label:"商标服务",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"专利",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"版权",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"财税",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"项目",value:"6"}}),e._v(" "),a("el-option",{attrs:{label:"高新",value:"7"}}),e._v(" "),a("el-option",{attrs:{label:"商标交易",value:"8"}}),e._v(" "),a("el-option",{attrs:{label:"法律服务",value:"9"}}),e._v(" "),a("el-option",{attrs:{label:"人事社保",value:"10"}}),e._v(" "),a("el-option",{attrs:{label:"工商",value:"11"}}),e._v(" "),a("el-option",{attrs:{label:"青苹果会员",value:"12"}}),e._v(" "),a("el-option",{attrs:{label:"红苹果会员",value:"13"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商机进度："}},[a("el-select",{attrs:{placeholder:"请选择商机进度",clearable:""},model:{value:e.formInline.businessProgress,callback:function(t){e.$set(e.formInline,"businessProgress",t)},expression:"formInline.businessProgress"}},[a("el-option",{attrs:{label:"全部",value:"-1"}}),e._v(" "),a("el-option",{attrs:{label:"初步洽谈",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"是否发送函件",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"是否约谈",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"销售报价",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"合同报价",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"项目失败",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"项目收款",value:"6"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success",icon:"el-icon-search",size:"mini"},on:{click:e.onSubmit}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini"},on:{click:e.onReset}},[e._v("重置")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listData.listLoading,expression:"listData.listLoading"}],attrs:{data:e.listData.list,"element-loading-text":"Loading",fit:"",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"所在部门",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.deptNames))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"负责人",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.businessOwnerName))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商机名称",width:"200","class-name":"company-name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{path:"/resourceManagement/resourceBusinessDetail/"+t.row.businessId}}},[a("div",{staticClass:"name"},[e._v(e._s(t.row.bussinessName))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"客户名称",width:"200","class-name":"company-name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{path:"/resourceManagement/resourceCustomerDetail/"+t.row.companyId}}},[a("div",{staticClass:"name"},[e._v(e._s(t.row.companyName))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"联系人",width:"130","class-name":"user-info",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"user-name"},[e._v(" "+e._s(t.row.userName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"意向业务",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("businessPurposeFilter")(t.row.businessPurpose)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商机进度",width:"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("businessProgressFilter")(t.row.businessProgress)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"最后跟进时间","min-width":"160",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.lastFollowTime))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最近动态",prop:"dynamic",width:"180",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.dealTime?a("span",[e._v(e._s(t.row.dealTime))]):e._e(),e._v(" "),a("br"),e._v(" "),t.row.dealUserName?a("span",[e._v(e._s(t.row.dealUserName)+"：")]):e._e(),e._v(" "),t.row.businessLogName?a("span",[e._v(e._s(e._f("businessLogNameFilter")(t.row.businessLogName)))]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.listData.start,"page-size":e.listData.length,total:e.listData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)}),i=[],r=a("90a8"),o=a("5f87"),u={inject:["reload"],name:"BusinessListTable",filters:{businessPurposeFilter:function(e){var t={"-1":"全部",1:"商标服务",2:"专利",3:"版权",4:"财税",5:"其他",6:"项目",7:"高薪",8:"商标交易",9:"法律服务",10:"人事社保",11:"工商"};return t[e]},businessProgressFilter:function(e){var t={"-1":"全部",0:"初步洽谈",1:"是否发送函件",2:"是否约谈",3:"销售报价",4:"合同报价",5:"项目失败",6:"项目收款"};return t[e]},businessLogNameFilter:function(e){var t={1:"新建商机",2:"代客下单",3:"跟进商机",4:"释放商机",5:"转移商机",6:"商机自动掉落",7:"分配商机"};return t[e]}},props:{listData:{type:Object,default:null},searchData:{type:Object,default:null},deptIdsVisible:{type:String,default:null},dialogVisible:{type:Object,default:null},activeTabsName:{type:String,default:null}},data:function(){return{selectDeptId:[],roleIds:[],propsDeptId:{label:"deptName",value:"pkSid",children:"children",checkStrictly:!0},formInline:{start:"1",length:"10",selectType:"1",deptIds:"",businessPurpose:"-1",businessProgress:"-1",businessOwner:null},userList:[]}},watch:{activeTabsName:{handler:function(e,t){"1"===e?this.formInline.selectType="1":"2"===e?this.formInline.selectType="2":"3"===e&&(this.formInline.selectType="3")},deep:!0,immediate:!0},"searchData.sysUserPageList":{handler:function(e,t){this.userList=e},deep:!0,immediate:!0},deptIdsVisible:{handler:function(e,t){this.formInline.deptIds=e}}},created:function(){var e=Object(o["a"])();this.roleIds=e},methods:{handleDeptTree:function(e){e.length>0?(this.getSysUserPage(e.slice(e.length-1)),this.formInline.deptIds=e.slice(e.length-1).toString()):(this.userList=this.searchData.sysUserPageList,this.formInline.businessOwner=null)},getSysUserPage:function(e){var t=this;Object(r["k"])({deptList:e}).then(function(e){t.userList=e.data.data,t.formInline.businessOwner=null}).catch(function(e){console.log("err",e)})},onSubmit:function(){this.formInline.deptIds=this.deptIdsVisible,this.$message.success("搜索成功!"),this.$emit("fetchData",this.formInline)},onReset:function(){this.formInline={start:"1",length:"10",selectType:"",deptIds:null,businessPurpose:"-1",businessProgress:"-1"},this.selectDeptId=[],this.formInline.selectType=this.activeTabsName,this.$message("重置搜索项!")},handleSizeChange:function(e){this.$set(this.formInline,"length",e),this.$emit("fetchData",this.formInline)},handleCurrentChange:function(e){this.$set(this.formInline,"start",e),this.$emit("fetchData",this.formInline)}}},c=u,d=(a("1751"),a("2877")),p=Object(d["a"])(c,l,i,!1,null,"46047681",null),f=p.exports,b=a("4395"),m={name:"Index",components:{BusinessListTable:f},data:function(){return{activeTabsName:"1",formInline:{start:"1",length:"10",selectType:"1",businessPurpose:"-1",businessProgress:"-1"},listData:{list:[],listLoading:!0,total:0},searchData:{deptTreeList:[],sysUserPageList:[]},endNodeDeptIds:[],deptIds:""}},watch:{},created:function(){this.init()},methods:{init:function(){this.formInline.selectType=String(this.activeTabsName),this.getDeptTree(),this.getCurUserPage()},fetchData:function(e){var t=this;"undefined"!==typeof e&&(this.formInline=e),this.$set(this.listData,"listLoading",!0),Object(b["a"])(this.formInline).then(function(e){1e4===e.data.code?t.listData=Object.assign({},t.listData,{list:e.data.data,total:e.data.total,start:e.data.start,length:e.data.length,listLoading:!1}):(t.$message.error(e.data.message),t.$set(t.listData,"listLoading",!1))}).catch(function(e){console.log("err",e)})},getDeptTree:function(e){var t=this;Object(r["h"])().then(function(e){1e4===e.data.code?(null!==e.data.data&&t.$set(t.searchData,"deptTreeList",e.data.data),t.runAsync(e.data.data).then(function(e){return console.log("部门ID列表",e),e.length>0&&(t.formInline.deptIds=e.toString(),t.deptIds=e.toString()),console.log(t.deptIds),t.handleTabs()})):t.$message.warning(e.data.message)}).catch(function(e){console.log("err",e)})},getCurUserPage:function(e){var t=this,a=this;Object(r["g"])().then(function(e){1e4===e.data.code&&null!==e.data.data?t.$set(t.searchData,"sysUserPageList",e.data.data):a.$message.warning(e.data.message)}).catch(function(e){console.log("err",e)})},forEachDeptTree:function(e){e=e||[];var t=this;e.length>0&&e.forEach(function(e,a){t.endNodeDeptIds.push(e.pkSid),null!=e.children&&t.forEachDeptTree(e.children)})},runAsync:function(e){var t=this;return new Promise(function(a,s){setTimeout(function(){t.forEachDeptTree(e),a(t.endNodeDeptIds)})})},handleTabs:function(e){this.formInline.selectType=String(this.activeTabsName),this.fetchData()}}},h=m,v=Object(d["a"])(h,s,n,!1,null,"240f2328",null);t["default"]=v.exports}}]);