(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39787764"],{"073a":function(e,t,a){"use strict";var n=a("78a7"),s=a.n(n);s.a},"2b6d":function(e,t,a){"use strict";a.d(t,"d",function(){return s}),a.d(t,"e",function(){return r}),a.d(t,"c",function(){return l}),a.d(t,"b",function(){return o}),a.d(t,"a",function(){return i});var n=a("b775");function s(e){return Object(n["a"])({url:"/zgBusiness/condition/pager/vo",method:"post",params:e})}function r(e){return Object(n["a"])({url:"/zgCompany/detail",method:"post",params:e})}function l(e){return Object(n["a"])({url:"/zgBusinessFollow/condition/pager",method:"post",params:e})}function o(e){return Object(n["a"])({url:"/zgBusinessLog/condition/pager",method:"post",params:e})}function i(e){return Object(n["a"])({url:"/zgBusiness/deal",method:"post",params:e})}},4395:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return r}),a.d(t,"c",function(){return l});var n=a("b775");function s(e){return Object(n["a"])({url:"/zgBusiness/condition/pager/all",method:"post",params:e})}function r(e){return Object(n["a"])({url:"/zgBusiness/condition/pager/vo",method:"post",params:e})}function l(e){return Object(n["a"])({url:"zgBusiness/update",method:"post",params:e})}},5664:function(e,t,a){"use strict";a.d(t,"k",function(){return s}),a.d(t,"a",function(){return r}),a.d(t,"t",function(){return l}),a.d(t,"o",function(){return o}),a.d(t,"g",function(){return i}),a.d(t,"q",function(){return u}),a.d(t,"p",function(){return c}),a.d(t,"s",function(){return d}),a.d(t,"x",function(){return m}),a.d(t,"u",function(){return p}),a.d(t,"d",function(){return f}),a.d(t,"j",function(){return b}),a.d(t,"h",function(){return h}),a.d(t,"n",function(){return v}),a.d(t,"b",function(){return g}),a.d(t,"v",function(){return y}),a.d(t,"e",function(){return _}),a.d(t,"l",function(){return w}),a.d(t,"m",function(){return O}),a.d(t,"c",function(){return k}),a.d(t,"w",function(){return j}),a.d(t,"f",function(){return D}),a.d(t,"i",function(){return T}),a.d(t,"r",function(){return S});var n=a("e13e");function s(e){return Object(n["a"])({url:"/sysDept/getDeptTreeList",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/sysDept/save",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/sysDept/update",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/sysUser/getSysUserPageList",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/sysDept/delete",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/sysUser/getSysUserPageList",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/sysUser/selectByID/"+e,method:"get"})}function d(e){return Object(n["a"])({url:"/sysUser/resetPwdByID/"+e,method:"get",data:e})}function m(e){return Object(n["a"])({url:"/sysUser/update",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/sysUser/updateOffWorkFlag",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/sysUser/save",method:"post",data:e})}function b(e){return Object(n["a"])({url:"/sysDept/getDeptList",method:"get",data:e})}function h(e){return Object(n["a"])({url:"/sysUser/exportSysUserList",method:"post",data:e,responseType:"blob"})}function v(){return Object(n["a"])({url:"/sysMenu/getSysMenuTree",method:"get"})}function g(e){return Object(n["a"])({url:"/sysMenu/saveSysMenu",method:"post",data:e})}function y(e){return Object(n["a"])({url:"/sysMenu/updateSysMenuByPkSid",method:"post",data:e})}function _(e){return Object(n["a"])({url:"/sysMenu/deleteSysMenuByPkSid/"+e,method:"get"})}function w(e){return Object(n["a"])({url:"/sysRole/getSysRolePageList/",method:"post",data:e})}function O(e){return Object(n["a"])({url:"/sysRoleMenu/getSysRoleMenuList",method:"post",data:e})}function k(e){return Object(n["a"])({url:"/sysRole/saveSysRole",method:"post",data:e})}function j(e){return Object(n["a"])({url:"/sysRole/updateSysRoleByPkSid",method:"post",data:e})}function D(e){return Object(n["a"])({url:"/sysRole/deleteSysRoleByPkSid/"+e,method:"get"})}function T(){return Object(n["a"])({baseURL:"http://192.168.91.112:10006/api/v1/sysUser/getCurrentUserDeptUsers",method:"get"})}function S(e){return Object(n["a"])({baseURL:"http://192.168.91.112:10006/api/v1/sysUser/getSysUserPageList",method:"post",data:e})}},"624a":function(e,t,a){},"78a7":function(e,t,a){},"914d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeTabsName,callback:function(t){e.activeTabsName=t},expression:"activeTabsName"}},[a("el-tab-pane",{attrs:{label:"待处理",name:"2"}},[a("release-business-list-table",{attrs:{"list-data":e.listData,"active-tabs-name":e.activeTabsName},on:{fetchData:e.fetchData}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"已失效",name:"3"}},[a("release-business-list-table",{attrs:{"list-data":e.listData,"active-tabs-name":e.activeTabsName},on:{fetchData:e.fetchData}})],1)],1)],1)},s=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customer-list-table"},[a("el-form",{attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{label:"顾问："}},[a("el-select",{attrs:{value:"",clearable:"",placeholder:"请选择顾问"},model:{value:e.formInline.lastBusinessOwner,callback:function(t){e.$set(e.formInline,"lastBusinessOwner",t)},expression:"formInline.lastBusinessOwner"}},[e._l(e.deptUsersList,function(e){return[a("el-option",{key:e.pkSid,attrs:{label:e.nickname,value:e.pkSid}})]})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"意向业务："}},[a("el-select",{attrs:{value:"",clearable:"",placeholder:"请选择意向业务"},model:{value:e.formInline.businessPurpose,callback:function(t){e.$set(e.formInline,"businessPurpose",t)},expression:"formInline.businessPurpose"}},[a("el-option",{attrs:{label:"全部",value:"-1"}}),e._v(" "),a("el-option",{attrs:{label:"商标服务",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"专利",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"版权",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"财税",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"项目",value:"6"}}),e._v(" "),a("el-option",{attrs:{label:"高新",value:"7"}}),e._v(" "),a("el-option",{attrs:{label:"商标交易",value:"8"}}),e._v(" "),a("el-option",{attrs:{label:"法律服务",value:"9"}}),e._v(" "),a("el-option",{attrs:{label:"人事社保",value:"10"}}),e._v(" "),a("el-option",{attrs:{label:"工商",value:"11"}}),e._v(" "),a("el-option",{attrs:{label:"青苹果会员",value:"12"}}),e._v(" "),a("el-option",{attrs:{label:"红苹果会员",value:"13"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商机进度："}},[a("el-select",{attrs:{value:"",clearable:"",placeholder:"请选择商机进度"},model:{value:e.formInline.businessProgress,callback:function(t){e.$set(e.formInline,"businessProgress",t)},expression:"formInline.businessProgress"}},[a("el-option",{attrs:{label:"全部",value:"-1"}}),e._v(" "),a("el-option",{attrs:{label:"初步洽谈",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"是否发送函件",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"是否约谈",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"销售报价",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"合同报价",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"项目失败",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"项目收款",value:"6"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"释放方式："}},[a("el-select",{attrs:{value:"",clearable:"",placeholder:"请选择释放方式"},model:{value:e.formInline.releaseType,callback:function(t){e.$set(e.formInline,"releaseType",t)},expression:"formInline.releaseType"}},[a("el-option",{attrs:{label:"全部",value:"-1"}}),e._v(" "),a("el-option",{attrs:{label:"主动掉落",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"自动释放",value:"2"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.onSubmit}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"small"},on:{click:e.onReset}},[e._v("重置")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listData.listLoading,expression:"listData.listLoading"}],attrs:{data:e.listData.list,"element-loading-text":"Loading",fit:"",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"释放人",width:"150","class-name":"tags",align:"center",prop:"lastBusinessOwnerName"}}),e._v(" "),a("el-table-column",{attrs:{label:"商机编号",width:"220","class-name":"company-name",align:"center",prop:"businessId"}}),e._v(" "),a("el-table-column",{attrs:{label:"商机名称",width:"220","class-name":"company-name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{path:"/resourceManagement/resourceBusinessDetail/"+t.row.businessId}}},[a("div",{staticClass:"name"},[e._v(e._s(t.row.bussinessName))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"客户名称",width:"150","class-name":"company-name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{path:"/resourceManagement/resourceCustomerDetail/"+t.row.companyId}}},[a("div",{staticClass:"name"},[e._v(e._s(t.row.companyName))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"联系人",width:"150","class-name":"tags",align:"center",prop:"userName"}}),e._v(" "),a("el-table-column",{attrs:{label:"联系电话",width:"150","class-name":"tags",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"user-phone"},[e._v(e._s(t.row.userMobile?t.row.userMobile.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"):""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"意向业务",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("businessPurposeFilter")(t.row.businessPurpose)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商机进度",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("businessProgressFilter")(t.row.businessProgress)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"成交几率",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.dealPercent)+"%")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最后跟进时间",prop:"nextFollowTime",sortable:"",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(null==t.row.lastFollowTime||""===t.row.lastFollowTime?"":t.row.lastFollowTime.toString().substr(0,10)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"释放时间",prop:"nextFollowTime",sortable:"",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(null==t.row.releaseTime||""===t.row.releaseTime?"":t.row.releaseTime.toString().substr(0,10)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"operation",fixed:"right","min-width":"190"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"===e.activeTabsName?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleReleaseBusiness(t.row)}}},[e._v("分配")]):e._e(),e._v(" "),"2"===e.activeTabsName?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.handleChooseOrderWay(t.row.pkSid)}}},[e._v("标为无效")]):e._e(),e._v(" "),"3"===e.activeTabsName?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleCancelChooseOrderWay(t.row.pkSid)}}},[e._v("取消无效标记")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.listData.start,"page-size":e.listData.length,total:e.listData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("distribution-business-dialog",{attrs:{visible:e.releaseBusinessVisible,"item-info":e.itemInfo},on:{"update:visible":function(t){e.releaseBusinessVisible=t}}})],1)},l=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"分配商机","close-on-click-modal":e.flag,visible:e.templateDialog,width:"30%"},on:{"update:visible":function(t){e.templateDialog=t},close:e.closeDia}},[a("el-form",{ref:"ruleFrom",attrs:{model:e.temp,"label-width":"100px"}},[a("el-form-item",{staticClass:"custom-prop",attrs:{label:"分配至："}},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请选择水果名",clearable:"",size:"small"},on:{select:e.handleSelect},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分配备注："}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",resize:"none"},model:{value:e.temp.mark,callback:function(t){e.$set(e.temp,"mark",t)},expression:"temp.mark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDia}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.save("ruleFrom")}}},[e._v("保存")])],1)],1)},i=[],u=(a("ac4d"),a("8a81"),a("ac6a"),a("2b6d")),c=a("5664"),d={inject:["reload"],name:"DistributionBusinessDialog",props:{visible:{type:Boolean,default:!1},itemInfo:{type:Object,default:function(){return{}}}},data:function(){return{flag:!1,templateDialog:this.visible,temp:{},nickname:"",userListParam:{start:"1",length:"10"}}},watch:{visible:function(){this.templateDialog=this.visible}},created:function(){},methods:{querySearchAsync:function(e,t){var a=this,n=this,s=[{}];n.userListParam.nickname=e,Object(c["r"])(n.userListParam).then(function(e){if(1e4===e.data.code){var a=!0,n=!1,r=void 0;try{for(var l,o=e.data.data.list[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var i=l.value;i.value=i.nickname}}catch(u){n=!0,r=u}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}s=e.data.data.list}t(s)}).catch(function(e){a.$message.error(e)})},createStateFilter:function(e){return 0===e.value.toLowerCase().indexOf(e.toLowerCase())},handleSelect:function(e){console.log(e),this.nickname=e.nickname,this.temp.businessOwner=e.pkSid},save:function(){var e=this;if(!e.temp.businessOwner)return e.$message.error("请选择正确的水果名！"),!1;e.temp=Object.assign({},e.temp,{pkSid:this.itemInfo.pkSid,businessId:this.itemInfo.businessId,selectType:"1"}),Object(u["a"])(e.temp).then(function(t){1e4===t.data.code?(e.closeDia(),e.reload()):e.$message.error("操作失败")}).catch(function(t){e.$message.error(t)})},closeDia:function(){this.temp={},this.$emit("update:visible",!1)}}},m=d,p=(a("073a"),a("2877")),f=Object(p["a"])(m,o,i,!1,null,"12ad7489",null),b=f.exports,h=a("4395"),v={name:"ReleaseBusinessListTable",components:{DistributionBusinessDialog:b},filters:{businessPurposeFilter:function(e){var t={"-1":"全部",1:"商标服务",2:"专利",3:"版权",4:"财税",5:"其他",6:"项目",7:"高薪",8:"商标交易",9:"法律服务",10:"人事社保",11:"工商"};return t[e]},businessProgressFilter:function(e){var t={"-1":"全部",0:"初步洽谈",1:"是否发送函件",2:"是否约谈",3:"销售报价",4:"合同报价",5:"项目失败",6:"项目收款"};return t[e]}},props:{listData:{type:Object,default:null},activeTabsName:{type:String,default:null}},data:function(){return{formInline:{start:"1",length:"10",businessType:"2",businessPurpose:"-1",businessProgress:"-1",releaseType:"-1",dealType:"-1",releasingFlage:"-1"},deptUsersList:[],releaseBusinessVisible:!1,itemInfo:null}},watch:{activeTabsName:{handler:function(e,t){"2"===e?this.formInline.businessType="2":"3"===e&&(this.formInline.businessType="3")},deep:!0,immediate:!0}},created:function(){this.getCurrentUserDeptUsersList()},methods:{getCurrentUserDeptUsersList:function(){var e=this;Object(c["i"])().then(function(t){1e4===t.data.code?e.deptUsersList=t.data.data:e.$message.error(t.data.message)}).catch(function(e){console.log("err",e)})},onSubmit:function(){this.$message.success("搜索成功!"),this.$emit("fetchData",this.formInline)},onReset:function(){this.formInline={start:"1",length:"10",businessType:"",businessPurpose:"-1",businessProgress:"-1",releaseType:"-1",dealType:"-1",releasingFlage:"-1"},this.formInline.businessType=this.activeTabsName,this.$message("重置搜索项!")},handleSizeChange:function(e){this.$set(this.formInline,"length",e),this.$emit("fetchData",this.formInline)},handleCurrentChange:function(e){this.$set(this.formInline,"start",e),this.$emit("fetchData",this.formInline)},handleReleaseBusiness:function(e){this.releaseBusinessVisible=!0,this.itemInfo=e},handleChooseOrderWay:function(e){var t=this;Object(h["c"])({pkSid:e,businessType:3}).then(function(e){1e4===e.data.code?(t.$message.success("操作成功"),t.$emit("fetchData",t.formInline)):500===e.data.code?t.$message.warning(e.data.message):t.$message.error(e.data.message)}).catch(function(e){console.log("err",e)})},handleCancelChooseOrderWay:function(e){var t=this;Object(h["c"])({pkSid:e,businessType:2}).then(function(e){1e4===e.data.code?(t.$message.success("操作成功"),t.$emit("fetchData",t.formInline)):500===e.data.code?t.$message.warning(e.data.message):t.$message.error(e.data.message)}).catch(function(e){console.log("err",e)})}}},g=v,y=(a("d221"),Object(p["a"])(g,r,l,!1,null,"180f924f",null)),_=y.exports,w={name:"Index",components:{ReleaseBusinessListTable:_},data:function(){return{activeTabsName:"2",formInline:{start:"1",length:"10",businessType:"2",businessPurpose:"-1",businessProgress:"-1",releaseType:"-1",dealType:"-1",releasingFlage:"-1"},listData:{list:[],listLoading:!0,total:0}}},watch:{activeTabsName:{handler:function(e,t){this.formInline.businessType=e,this.fetchData()},deep:!0,immediate:!0}},methods:{fetchData:function(e){var t=this;"undefined"!==typeof e&&(this.formInline=e),this.$set(this.listData,"listLoading",!0),Object(h["b"])(this.formInline).then(function(e){1e4===e.data.code?t.listData=Object.assign({},t.listData,{list:e.data.data,total:e.data.total,start:e.data.start,length:e.data.length,listLoading:!1}):(t.$message.error(e.data.message),t.$set(t.listData,"listLoading",!1))}).catch(function(e){console.log("err",e)})}}},O=w,k=Object(p["a"])(O,n,s,!1,null,"38c342a6",null);t["default"]=k.exports},d221:function(e,t,a){"use strict";var n=a("624a"),s=a.n(n);s.a},e13e:function(e,t,a){"use strict";var n=a("bc3a"),s=a.n(n),r=a("5c96"),l=a("4360"),o=a("5f87"),i=a("a18c"),u=s.a.create({baseURL:"http://192.168.91.112:10006/api/v1",withCredentials:!1,timeout:5e3});u.interceptors.request.use(function(e){return Object(o["b"])()||i["c"].push("/login"),e.headers={"Content-Type":"application/json",token:Object(o["b"])()},e},function(e){return console.log(e),Promise.reject(e)}),u.interceptors.response.use(function(e){var t=e,a=e.data;return a.code&&1e4!==a.code?(Object(r["Message"])({message:a.message||"error",type:"error",duration:5e3}),50008!==a.code&&50012!==a.code&&50014!==a.code||r["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then(function(){l["a"].dispatch("user/resetToken").then(function(){location.reload()})}),Promise.reject(a.message||"error")):t},function(e){return console.log("err"+e),Object(r["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)}),t["a"]=u}}]);