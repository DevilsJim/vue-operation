(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f2daad9"],{"2f21":function(e,t,n){"use strict";var a=n("79e5");e.exports=function(e,t){return!!e&&a(function(){t?e.call(null,function(){},1):e.call(null)})}},"33fd":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("customer-list-table",{attrs:{"list-data":e.listData},on:{fetchData:e.fetchData}})],1)},r=[],s=n("5664"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"customer-list-table"},[n("el-container",{attrs:{direction:"vertical"}},[n("p",[e._v("数据列表")]),e._v(" "),n("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData,"row-key":"pkSid",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[n("el-table-column",{attrs:{label:"菜单名称",width:"300",align:"center",prop:"name"}}),e._v(" "),n("el-table-column",{attrs:{label:"请求地址",width:"180",align:"center",prop:"url"}}),e._v(" "),n("el-table-column",{attrs:{label:"类目",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{size:"medium",effect:"dark",type:e._f("tagTypeFilter")(t.row.menuType)}},[e._v(e._s(e._f("menuTypeFilter")(t.row.menuType)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"是否启用",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("statusFilter")(t.row.status)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center","class-name":"operation",fixed:"right","min-width":"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){return e.editMenu(t.row)}}},[e._v("编辑")]),e._v(" "),4!==t.row.menuType?n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){return e.addMenu(t.row)}}},[e._v("添加")]):e._e(),e._v(" "),n("el-button",{attrs:{size:"mini",plain:""},on:{click:function(n){return e.deleteMenu(t.row.pkSid)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),n("add-edit-menu-dialog",{attrs:{visible:e.addEditMenuVisible,"menu-data":e.menuData},on:{"update:visible":function(t){e.addEditMenuVisible=t}}})],1)},i=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,visible:e.templateDialog,"close-on-click-modal":e.flag,width:"520px"},on:{"update:visible":function(t){e.templateDialog=t},close:function(t){return e.closeDia("ruleForm")},open:e.openDia}},[n("el-form",{ref:"ruleForm",attrs:{rules:e.rules,size:"mini",model:e.menuInfo,"label-width":"120px"}},["add"===e.menuData.addOrEdit?n("el-form-item",{attrs:{label:"上级菜单:"}},[n("el-tag",{attrs:{size:"medium",effect:"dark",type:e._f("tagTypeFilter")(e.addMenuData.addMenuType)}},[e._v(e._s(e.addMenuData.pkName))])],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"菜单类型:",prop:"menuType"}},["add"===e.menuData.addOrEdit?[[1].indexOf(e.addMenuData.addMenuType)>-1?n("el-radio",{attrs:{label:2},model:{value:e.menuInfo.menuType,callback:function(t){e.$set(e.menuInfo,"menuType",t)},expression:"menuInfo.menuType"}},[e._v("目录")]):e._e(),e._v(" "),[2,3].indexOf(e.addMenuData.addMenuType)>-1?n("el-radio",{attrs:{label:3},model:{value:e.menuInfo.menuType,callback:function(t){e.$set(e.menuInfo,"menuType",t)},expression:"menuInfo.menuType"}},[e._v("菜单")]):e._e(),e._v(" "),3===e.addMenuData.addMenuType?n("el-radio",{attrs:{label:4},model:{value:e.menuInfo.menuType,callback:function(t){e.$set(e.menuInfo,"menuType",t)},expression:"menuInfo.menuType"}},[e._v("按钮")]):e._e()]:n("el-tag",{attrs:{size:"medium",effect:"dark",type:e._f("tagTypeFilter")(e.menuInfo.menuType)}},[e._v(e._s(e._f("menuTypeFilter")(e.menuInfo.menuType)))])],2),e._v(" "),n("el-form-item",{attrs:{label:"菜单中文名称:",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入菜单中文名称",clearable:""},model:{value:e.menuInfo.name,callback:function(t){e.$set(e.menuInfo,"name",t)},expression:"menuInfo.name"}})],1),e._v(" "),4!==e.menuInfo.menuType?n("el-form-item",{attrs:{label:"菜单英文名称:",prop:"ename"}},["add"===e.menuData.addOrEdit?n("el-input",{attrs:{placeholder:"请输入菜单英文名称",clearable:""},model:{value:e.menuInfo.ename,callback:function(t){e.$set(e.menuInfo,"ename",t)},expression:"menuInfo.ename"}}):n("el-input",{attrs:{placeholder:"请输入菜单英文名称",clearable:"",disabled:""},model:{value:e.menuInfo.ename,callback:function(t){e.$set(e.menuInfo,"ename",t)},expression:"menuInfo.ename"}})],1):e._e(),e._v(" "),4!==e.menuInfo.menuType?n("el-form-item",{attrs:{label:"请求地址:",prop:"url"}},["add"===e.menuData.addOrEdit?n("el-input",{attrs:{placeholder:"请输入请求地址",clearable:""},model:{value:e.menuInfo.url,callback:function(t){e.$set(e.menuInfo,"url",t)},expression:"menuInfo.url"}}):n("el-input",{attrs:{placeholder:"请输入请求地址",clearable:"",disabled:""},model:{value:e.menuInfo.url,callback:function(t){e.$set(e.menuInfo,"url",t)},expression:"menuInfo.url"}})],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"排序:",prop:"sort"}},[n("el-input",{attrs:{placeholder:"请输入排序编号",clearable:""},model:{value:e.menuInfo.sort,callback:function(t){e.$set(e.menuInfo,"sort",t)},expression:"menuInfo.sort"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"状态:",prop:"status"}},[n("el-radio",{attrs:{label:1},model:{value:e.menuInfo.status,callback:function(t){e.$set(e.menuInfo,"status",t)},expression:"menuInfo.status"}},[e._v("启用")]),e._v(" "),n("el-radio",{attrs:{label:2},model:{value:e.menuInfo.status,callback:function(t){e.$set(e.menuInfo,"status",t)},expression:"menuInfo.status"}},[e._v("停用")])],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){"edit"===e.menuData.addOrEdit?e.updateSave("ruleForm"):e.addSave("ruleForm")}}},[e._v("保存")])],1)],1)},l=[],d=(n("55dd"),n("7f7f"),{inject:["reload"],name:"EditDepartmentDialog",filters:{menuTypeFilter:function(e){var t={1:"页签",2:"目录",3:"菜单",4:"按钮",5:"字段"};return t[e]},tagTypeFilter:function(e){var t={1:"info",2:"",3:"success",4:"danger",5:"warning"};return t[e]}},props:{visible:{type:Boolean,default:!1},menuData:{type:Object,default:null}},data:function(){var e=function(e,t,n){return""===t?n(new Error("请输入排序编号")):isNaN(t)||!/^-?[1-9]\d*$/.test(t)?n(new Error("请输入整数")):void n()};return{flag:!1,title:"编辑菜单",templateDialog:this.visible,menuInfo:{},addMenuData:{},rules:{menuType:[{required:!0,message:"请选择菜单类型",trigger:"change"}],name:[{required:!0,message:"请输入菜单中文名称",trigger:"blur"},{min:0,max:20,message:"菜单中文名称不能超过20个字符",trigger:"blur"}],ename:[{required:!0,message:"请输入菜单英文名称",trigger:"blur"},{min:0,max:50,message:"菜单英文名称不能超过20个字符",trigger:"blur"}],url:[{required:!0,message:"请输入请求地址",trigger:"blur"}],sort:[{validator:e,required:!0,trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}}},watch:{visible:function(e,t){this.templateDialog=e}},methods:{closeDia:function(e){this.$emit("update:visible",!1),this.menuInfo={},this.title="编辑菜单",this.$refs[e].resetFields()},openDia:function(){var e=this.menuData.addEditData;"edit"===this.menuData.addOrEdit?(this.title="编辑菜单",this.menuInfo=Object.assign({},this.menuInfo,{pkSid:e.pkSid,pid:e.pid,name:e.name,ename:e.ename,sort:e.sort,status:e.status,url:e.url,menuType:e.menuType})):(this.title="新增子菜单",this.menuInfo=Object.assign({},this.menuInfo,{pid:e.pkSid}),this.addMenuData=Object.assign({},this.addMenuData,{pkName:e.name,addMenuType:e.menuType}))},updateSave:function(e){var t=this;this.$refs[e].validate(function(n){if(!n)return t.$message.warning("请完善您的数据"),!1;Object(s["v"])(t.menuInfo).then(function(n){1e4===n.data.code?(t.$message.success(n.data.message),t.reload()):t.$message.error(n.data.message),t.closeDia(e)}).catch(function(e){t.$message.warning(e)})})},addSave:function(e){var t=this;this.$refs[e].validate(function(n){if(!n)return t.$message.warning("请完善您的数据"),!1;Object(s["b"])(t.menuInfo).then(function(n){1e4===n.data.code?(t.$message.success(n.data.message),t.reload()):t.$message.error(n.data.message),t.closeDia(e)}).catch(function(e){t.$message.warning(e)})})},resetForm:function(e){this.templateDialog=!1,this.$refs[e].resetFields()}}}),c=d,m=(n("8408"),n("2877")),f=Object(m["a"])(c,o,l,!1,null,"e724b75a",null),p=f.exports,b={inject:["reload"],name:"CustomerListTable",filters:{menuTypeFilter:function(e){var t={1:"页签",2:"目录",3:"菜单",4:"按钮",5:"字段"};return t[e]},tagTypeFilter:function(e){var t={1:"info",2:"",3:"success",4:"danger",5:"warning"};return t[e]},statusFilter:function(e){var t={1:"启用",2:"停用"};return t[e]}},components:{addEditMenuDialog:p},props:{listData:{type:Object,default:null}},data:function(){return{tableData:[],addEditMenuVisible:!1,menuData:{addEditData:{},addOrEdit:"add"},deletePksid:0}},watch:{listData:{handler:function(e,t){this.tableData=e.list},deep:!0,immediate:!0}},methods:{addMenu:function(e){this.addEditMenuVisible=!0,this.menuData=Object.assign({},this.menuData,{addEditData:e,addOrEdit:"add"})},editMenu:function(e){this.addEditMenuVisible=!0,this.menuData=Object.assign({},this.menuData,{addEditData:e,addOrEdit:"edit"})},deleteMenu:function(e){var t=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s["e"])(e).then(function(e){1e4===e.data.code?(t.$message({type:"success",message:"删除成功!"}),t.reload()):t.$message({type:"info",message:"删除失败"})}).catch(function(e){t.$message.error(e)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},g=b,h=(n("6972"),Object(m["a"])(g,u,i,!1,null,"1b99ee14",null)),y=h.exports,v={name:"MenuManagement",components:{CustomerListTable:y},data:function(){return{formInline:{},listData:{list:[],listLoading:!0}}},watch:{},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.$set(this.listData,"listLoading",!0),Object(s["n"])().then(function(t){e.listData=Object.assign({},e.listData,{list:t.data.data,listLoading:!1})}).catch(function(e){console.log("err",e)})}}},D=v,_=Object(m["a"])(D,a,r,!1,null,"31218568",null);t["default"]=_.exports},"55dd":function(e,t,n){"use strict";var a=n("5ca1"),r=n("d8e8"),s=n("4bf8"),u=n("79e5"),i=[].sort,o=[1,2,3];a(a.P+a.F*(u(function(){o.sort(void 0)})||!u(function(){o.sort(null)})||!n("2f21")(i)),"Array",{sort:function(e){return void 0===e?i.call(s(this)):i.call(s(this),r(e))}})},5664:function(e,t,n){"use strict";n.d(t,"k",function(){return r}),n.d(t,"a",function(){return s}),n.d(t,"t",function(){return u}),n.d(t,"o",function(){return i}),n.d(t,"g",function(){return o}),n.d(t,"q",function(){return l}),n.d(t,"p",function(){return d}),n.d(t,"s",function(){return c}),n.d(t,"x",function(){return m}),n.d(t,"u",function(){return f}),n.d(t,"d",function(){return p}),n.d(t,"j",function(){return b}),n.d(t,"h",function(){return g}),n.d(t,"n",function(){return h}),n.d(t,"b",function(){return y}),n.d(t,"v",function(){return v}),n.d(t,"e",function(){return D}),n.d(t,"l",function(){return _}),n.d(t,"m",function(){return O}),n.d(t,"c",function(){return j}),n.d(t,"w",function(){return I}),n.d(t,"f",function(){return T}),n.d(t,"i",function(){return k}),n.d(t,"r",function(){return M});var a=n("e13e");function r(e){return Object(a["a"])({url:"/sysDept/getDeptTreeList",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/sysDept/save",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/sysDept/update",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/sysUser/getSysUserPageList",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/sysDept/delete",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/sysUser/getSysUserPageList",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/sysUser/selectByID/"+e,method:"get"})}function c(e){return Object(a["a"])({url:"/sysUser/resetPwdByID/"+e,method:"get",data:e})}function m(e){return Object(a["a"])({url:"/sysUser/update",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/sysUser/updateOffWorkFlag",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/sysUser/save",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/sysDept/getDeptList",method:"get",data:e})}function g(e){return Object(a["a"])({url:"/sysUser/exportSysUserList",method:"post",data:e,responseType:"blob"})}function h(){return Object(a["a"])({url:"/sysMenu/getSysMenuTree",method:"get"})}function y(e){return Object(a["a"])({url:"/sysMenu/saveSysMenu",method:"post",data:e})}function v(e){return Object(a["a"])({url:"/sysMenu/updateSysMenuByPkSid",method:"post",data:e})}function D(e){return Object(a["a"])({url:"/sysMenu/deleteSysMenuByPkSid/"+e,method:"get"})}function _(e){return Object(a["a"])({url:"/sysRole/getSysRolePageList/",method:"post",data:e})}function O(e){return Object(a["a"])({url:"/sysRoleMenu/getSysRoleMenuList",method:"post",data:e})}function j(e){return Object(a["a"])({url:"/sysRole/saveSysRole",method:"post",data:e})}function I(e){return Object(a["a"])({url:"/sysRole/updateSysRoleByPkSid",method:"post",data:e})}function T(e){return Object(a["a"])({url:"/sysRole/deleteSysRoleByPkSid/"+e,method:"get"})}function k(){return Object(a["a"])({baseURL:"http://192.168.91.112:10006/api/v1/sysUser/getCurrentUserDeptUsers",method:"get"})}function M(e){return Object(a["a"])({baseURL:"http://192.168.91.112:10006/api/v1/sysUser/getSysUserPageList",method:"post",data:e})}},6972:function(e,t,n){"use strict";var a=n("9601"),r=n.n(a);r.a},8408:function(e,t,n){"use strict";var a=n("dcbb"),r=n.n(a);r.a},9601:function(e,t,n){},dcbb:function(e,t,n){},e13e:function(e,t,n){"use strict";var a=n("bc3a"),r=n.n(a),s=n("5c96"),u=n("4360"),i=n("5f87"),o=n("a18c"),l=r.a.create({baseURL:"http://192.168.91.112:10006/api/v1",withCredentials:!1,timeout:5e3});l.interceptors.request.use(function(e){return Object(i["b"])()||o["c"].push("/login"),e.headers={"Content-Type":"application/json",token:Object(i["b"])()},e},function(e){return console.log(e),Promise.reject(e)}),l.interceptors.response.use(function(e){var t=e,n=e.data;return n.code&&1e4!==n.code?(Object(s["Message"])({message:n.message||"error",type:"error",duration:5e3}),50008!==n.code&&50012!==n.code&&50014!==n.code||s["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then(function(){u["a"].dispatch("user/resetToken").then(function(){location.reload()})}),Promise.reject(n.message||"error")):t},function(e){return console.log("err"+e),Object(s["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)}),t["a"]=l}}]);