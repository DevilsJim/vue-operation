(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1eb3484c"],{"0f87":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"审核无效客户","close-on-click-modal":e.flag,visible:e.templateDialog,width:"650px"},on:{"update:visible":function(t){e.templateDialog=t},close:e.closeDia}},[a("el-form",{attrs:{model:e.temp,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"审核结果:"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.temp.checkType,callback:function(t){e.$set(e.temp,"checkType",t)},expression:"temp.checkType"}},[e._v("通过")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.temp.checkType,callback:function(t){e.$set(e.temp,"checkType",t)},expression:"temp.checkType"}},[e._v("不通过")])],1),e._v(" "),a("el-form-item",{attrs:{label:"审核意见:"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDia}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.doRelease}},[e._v("保存")])],1)],1)},l=[],s=a("90a8"),i={name:"AuditCustomerDialog",props:{visible:{type:Boolean,default:!1},currentCompanyId:{type:String,default:null}},data:function(){return{flag:!1,templateDialog:!1,temp:{logName:"8"}}},watch:{visible:function(){this.templateDialog=this.visible},currentCompanyId:{handler:function(e,t){this.temp.companyId=e},deep:!0,immediate:!0}},methods:{closeDia:function(){this.temp={},this.$emit("update:visible",!1)},doRelease:function(){var e=this,t=this;0===this.temp.checkType&&(this.temp.remark="通过无效客户审核 <br/> "+t.temp.remark),1===this.temp.checkType&&(this.temp.remark="未通过无效客户审核 <br/> "+t.temp.remark),console.log(this.temp.remark),Object(s["c"])(this.temp).then(function(a){1e4===a.data.code?(t.$message.success(a.data.message),e.$emit("fetchData"),e.closeDia()):t.$message.error("操作失败")}).catch(function(e){t.$message.error(e)})}}},r=i,o=(a("4213"),a("2877")),c=Object(o["a"])(r,n,l,!1,null,"22aabc18",null);t["a"]=c.exports},"1bdd":function(e,t,a){},"2e4e":function(e,t,a){},4213:function(e,t,a){"use strict";var n=a("1bdd"),l=a.n(n);l.a},"444a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleTabs},model:{value:e.activeTabsName,callback:function(t){e.activeTabsName=t},expression:"activeTabsName"}},[a("el-tab-pane",{attrs:{label:"全部客户",name:"-1"}},[a("customer-list-table",{attrs:{"list-data":e.listData,"search-data":e.searchData,"dialog-visible":e.dialogVisible,"dept-ids-visible":e.deptIds,"need-approve":e.formInline.needApprove},on:{"update:deptIdsVisible":function(t){e.deptIds=t},"update:dept-ids-visible":function(t){e.deptIds=t},fetchData:e.fetchData,getCurCompanyId:e.getCurCompanyId}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"无效客户",name:"2"}},[a("customer-list-table",{attrs:{"list-data":e.listData,"search-data":e.searchData,"dialog-visible":e.dialogVisible,"dept-ids-visible":e.deptIds,"need-approve":e.formInline.needApprove},on:{"update:deptIdsVisible":function(t){e.deptIds=t},"update:dept-ids-visible":function(t){e.deptIds=t},fetchData:e.fetchData,getCurCompanyId:e.getCurCompanyId}})],1)],1),e._v(" "),a("assign-adviser-dialog",{attrs:{visible:e.dialogVisible.assignAdviserVisible,"search-data":e.searchData,"current-company-id":e.currentCompanyId},on:{"update:visible":function(t){return e.$set(e.dialogVisible,"assignAdviserVisible",t)},fetchData:e.fetchData}}),e._v(" "),a("change-customer-dialog",{attrs:{visible:e.dialogVisible.changeCustomerVisible,"sys-user-page-list":e.searchData.sysUserPageList,"current-company-id":e.currentCompanyId},on:{"update:visible":function(t){return e.$set(e.dialogVisible,"changeCustomerVisible",t)},fetchData:e.fetchData}}),e._v(" "),a("audit-customer-dialog",{attrs:{visible:e.dialogVisible.auditCustomerVisible,"current-company-id":e.currentCompanyId},on:{"update:visible":function(t){return e.$set(e.dialogVisible,"auditCustomerVisible",t)},fetchData:e.fetchData}})],1)},l=[],s=(a("ac6a"),a("6b54"),a("90a8")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customer-list-table"},[a("el-form",{attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",[a("el-cascader",{attrs:{props:e.propsDeptId,options:e.searchData.deptTreeList,"show-all-levels":!1,clearable:"",placeholder:"请选择部门"},on:{change:e.handleDeptTree},model:{value:e.selectDeptId,callback:function(t){e.selectDeptId=t},expression:"selectDeptId"}})],1),e._v(" "),a("el-form-item",[a("el-select",{attrs:{value:"",filterable:"",placeholder:"请选择的顾问",clearable:""},model:{value:e.formInline.currentUserId,callback:function(t){e.$set(e.formInline,"currentUserId",t)},expression:"formInline.currentUserId"}},e._l(e.userList,function(e){return a("el-option",{key:e.pkSid,attrs:{label:e.nickname,value:e.pkSid}})}),1)],1),e._v(" "),2!==e.formInline.needApprove?[a("el-form-item",[a("el-select",{attrs:{value:"",clearable:"",placeholder:"请选择客户池"},model:{value:e.formInline.contactType,callback:function(t){e.$set(e.formInline,"contactType",t)},expression:"formInline.contactType"}},[a("el-option",{attrs:{label:"私海",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"公海",value:"0"}})],1)],1)]:e._e(),e._v(" "),a("el-form-item",[a("el-select",{attrs:{value:"",clearable:"",placeholder:"请选择客户标签"},model:{value:e.formInline.companySign,callback:function(t){e.$set(e.formInline,"companySign",t)},expression:"formInline.companySign"}},[a("el-option",{attrs:{label:"新客户",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"渠道用户",value:"1"}})],1)],1),e._v(" "),a("el-form-item",[a("el-select",{attrs:{value:"",clearable:"",placeholder:"请选择意向业务"},model:{value:e.formInline.businessPurpose,callback:function(t){e.$set(e.formInline,"businessPurpose",t)},expression:"formInline.businessPurpose"}},[a("el-option",{attrs:{label:"商标服务",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"专利",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"版权",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"财税",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"5"}})],1)],1),e._v(" "),"2"!==e.formInline.needApprove?[a("el-form-item",[a("el-select",{attrs:{value:"",placeholder:"是否需审批"},model:{value:e.formInline.needApprove,callback:function(t){e.$set(e.formInline,"needApprove",t)},expression:"formInline.needApprove"}},[a("el-option",{attrs:{label:"全部客户",value:"-1"}}),e._v(" "),a("el-option",{attrs:{label:"不需审批",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"待审批",value:"1"}})],1)],1)]:e._e(),e._v(" "),a("el-form-item",{staticClass:"created-time"},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始跟进时间","end-placeholder":"结束跟进时间",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"]},on:{change:e.handleCreatedTime},model:{value:e.createdTime,callback:function(t){e.createdTime=t},expression:"createdTime"}})],1),e._v(" "),a("el-form-item",{staticClass:"btn-wrap"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.onSubmit}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"small"},on:{click:e.onReset}},[e._v("重置")])],1)],2),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listData.listLoading,expression:"listData.listLoading"}],attrs:{data:e.listData.list,"element-loading-text":"Loading",fit:"",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60",align:"center"}}),e._v(" "),2!==e.formInline.needApprove?[a("el-table-column",{attrs:{label:"跟进部门",width:"195",prop:"sysGroupoName","class-name":"user-info","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"跟进人",width:"195",prop:"sysUserName","class-name":"user-info","header-align":"center"}})]:e._e(),e._v(" "),a("el-table-column",{attrs:{label:"客户名称",width:"220","class-name":"company-name","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{path:"/customerServiceManagement/customerDetail/"+t.row.companyId}}},[a("div",{staticClass:"name"},[e._v(e._s(t.row.companyName))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"联系人信息",width:"195","class-name":"user-info","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"user-name"},[e._v("姓名: "+e._s(t.row.latentNickName))]),e._v(" "),a("span",{staticClass:"user-phone"},[e._v("电话: "+e._s(t.row.latentUserMobile?t.row.latentUserMobile.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"):""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最后跟进时间",prop:"lastDynamicLogTime",sortable:"",width:"130",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"客户标签",width:"190","class-name":"tags","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[2!==t.row.companySign?a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(e._f("companySignFilter")(t.row.companySign)))]):e._e(),e._v(" "),0!==t.row.intentionLevel?a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(e._f("intentionLevelFilter")(t.row.intentionLevel)))]):e._e(),e._v(" "),0!==t.row.worthLevel?a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(e._f("worthLevelFilter")(t.row.worthLevel)))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"意向业务",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("businessPurposeFilter")(t.row.businessPurpose)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"来源",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("businessPurposeFilter")(t.row.businessPurpose)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最新动态","min-width":"160","class-name":"dynamic"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.lastDynamicLogOperator)+"："+e._s(e._f("lastDynamicLogNameFilter")(t.row.lastDynamicLogName)))]),e._v(" "),a("span",[e._v(e._s(t.row.lastDynamicLogTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建日期",prop:"createTime",sortable:"",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(null==t.row.nextFollowTime||""===t.row.nextFollowTime?"":t.row.nextFollowTime.toString().substr(0,10)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"operation",fixed:"right",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"}},[a("router-link",{attrs:{to:{path:"/customerServiceManagement/customerDetail/"+t.row.companyId}}},[a("div",{staticClass:"name"},[e._v("查看")])])],1),e._v(" "),1===t.row.contactType&&-1!==e.roleIds.indexOf(11201)?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.handleChangeCustomer(t.row.companyId)}}},[e._v("变更")]):0===t.row.contactType&&-1!==e.roleIds.indexOf(11201)?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.handleAssignAdviser(t.row.companyId)}}},[e._v("分配")]):e._e(),e._v(" "),1===t.row.needApprove?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.handleAuditCustomer(t.row.companyId)}}},[e._v("审核")]):e._e()]}}])})],2),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.listData.start,"page-size":e.listData.length,total:e.listData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],o=a("5f87"),c={name:"CustomerListTable",filters:{companySignFilter:function(e){var t={0:"新客户",1:"渠道用户"};return t[e]},intentionLevelFilter:function(e){var t={0:"",1:"无意向",2:"有意向",3:"高意向"};return t[e]},worthLevelFilter:function(e){var t={0:"",1:"低价值",2:"中价值",3:"高价值"};return t[e]},memberLevelFilter:function(e){var t={0:"红苹果",1:"青苹果"};return t[e]},businessPurposeFilter:function(e){var t={1:"商标服务",2:"专利",3:"版权",4:"财税",5:"其他"};return t[e]},companyTypeFilter:function(e){var t={0:"个人",1:"公司",2:"个体工商户"};return t[e]},lastDynamicLogNameFilter:function(e){var t={1:"跟进记录",2:"释放到公海",3:"转移客户",4:"捡入私海",5:"分配客户",6:"变更客户",7:"创建客户"};return t[e]}},props:{listData:{type:Object,default:null},searchData:{type:Object,default:null},dialogVisible:{type:Object,default:null},deptIdsVisible:{type:String,default:null},needApprove:{type:String,default:null}},data:function(){return{createdTime:null,selectDeptId:[],roleIds:[],propsDeptId:{label:"deptName",value:"pkSid",children:"children",checkStrictly:!0},formInline:{start:"1",length:"10",deleteStatus:"0",currentUserId:null,deptIds:"",contactType:"1",needApprove:"-1"},userList:[]}},watch:{listData:{handler:function(e,t){this.list=e.list},deep:!0,immediate:!0},"searchData.sysUserPageList":{handler:function(e,t){this.userList=e},deep:!0,immediate:!0},deptIdsVisible:{handler:function(e,t){this.formInline.deptIds=e}},needApprove:{handler:function(e,t){this.formInline.needApprove=e+""}}},created:function(){var e=Object(o["a"])();this.roleIds=e},methods:{handleDeptTree:function(e){e.length>0?(this.getSysUserPage(e.slice(e.length-1)),this.formInline.deptIds=e.slice(e.length-1).toString()):(this.userList=this.searchData.sysUserPageList,this.formInline.currentUserId=null)},getSysUserPage:function(e){var t=this;Object(s["k"])({deptList:e}).then(function(e){t.userList=e.data.data,t.formInline.currentUserId=null}).catch(function(e){console.log("err",e)})},handleCreatedTime:function(e){null!==e?(this.$set(this.formInline,"startCreatedTime",e[0]),this.$set(this.formInline,"endCreatedTime",e[1])):(this.$set(this.formInline,"startCreatedTime",""),this.$set(this.formInline,"endCreatedTime",""))},onSubmit:function(){this.formInline.deptIds=this.deptIdsVisible,this.$message.success("搜索成功!"),this.$emit("fetchData",this.formInline)},onReset:function(){"2"!==this.needApprove?this.formInline={start:"1",length:"10",deleteStatus:"0",contactType:"1",needApprove:"-1",deptIds:this.deptIdsVisible}:this.formInline={start:"1",length:"10",deleteStatus:"0",contactType:"1",deptIds:this.deptIdsVisible,needApprove:"2"},this.selectDeptId=[],this.createdTime=null,this.$message("重置搜索项!")},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.$set(this.formInline,"length",e),this.$emit("fetchData",this.formInline)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.$set(this.formInline,"start",e),this.$emit("fetchData",this.formInline)},handleAssignAdviser:function(e){this.dialogVisible.assignAdviserVisible=!0,this.$emit("getCurCompanyId",e)},handleChangeCustomer:function(e){this.dialogVisible.changeCustomerVisible=!0,this.$emit("getCurCompanyId",e)},handleAuditCustomer:function(e){this.dialogVisible.auditCustomerVisible=!0,this.$emit("getCurCompanyId",e)}}},u=c,d=(a("cc64"),a("2877")),p=Object(d["a"])(u,i,r,!1,null,"3bac23a8",null),m=p.exports,f=a("ff92"),h=a("597c"),g=a("0f87"),b={name:"CustomerList",components:{CustomerListTable:m,AssignAdviserDialog:f["a"],ChangeCustomerDialog:h["a"],AuditCustomerDialog:g["a"]},data:function(){return{activeTabsName:"-1",formInline:{start:"1",length:"10",deleteStatus:"0",contactType:"1",needApprove:"-1"},listData:{list:[],listLoading:!0,total:0},searchData:{deptTreeList:[],sysUserPageList:[]},currentCompanyId:null,dialogVisible:{assignAdviserVisible:!1,changeCustomerVisible:!1,auditCustomerVisible:!1},endNodeDeptIds:[],deptIds:""}},watch:{},created:function(){this.init()},methods:{init:function(){this.formInline.needApprove=String(this.activeTabsName),this.getDeptTree(),this.getCurUserPage()},getDeptTree:function(e){var t=this;Object(s["h"])().then(function(e){1e4===e.data.code?(null!==e.data.data&&t.$set(t.searchData,"deptTreeList",e.data.data),t.runAsync(e.data.data).then(function(e){return console.log("部门ID列表",e),e.length>0&&(t.formInline.deptIds=e.toString(),t.deptIds=e.toString()),console.log(t.deptIds),t.handleTabs()})):t.$message.warning(e.data.message)}).catch(function(e){console.log("err",e)})},getCurUserPage:function(e){var t=this,a=this;Object(s["g"])().then(function(e){1e4===e.data.code&&null!==e.data.data?t.$set(t.searchData,"sysUserPageList",e.data.data):a.$message.warning(e.data.message)}).catch(function(e){console.log("err",e)})},fetchData:function(e){var t=this;"undefined"!==typeof e&&(this.formInline=e),null===this.formInline.needApprove&&(this.formInline.needApprove="-1"),this.$set(this.listData,"listLoading",!0),Object(s["i"])(this.formInline).then(function(e){t.listData=Object.assign({},t.listData,{list:e.data.data,total:e.data.total,start:e.data.start,length:e.data.length,listLoading:!1})}).catch(function(e){console.log("err",e)})},forEachDeptTree:function(e){e=e||[];var t=this;e.length>0&&e.forEach(function(e,a){t.endNodeDeptIds.push(e.pkSid),null!=e.children&&t.forEachDeptTree(e.children)})},runAsync:function(e){var t=this;return new Promise(function(a,n){setTimeout(function(){t.forEachDeptTree(e),a(t.endNodeDeptIds)})})},getCurCompanyId:function(e){this.currentCompanyId=e},handleTabs:function(e){this.formInline.needApprove=String(this.activeTabsName),this.fetchData()}}},v=b,y=Object(d["a"])(v,n,l,!1,null,"18b19a0d",null);t["default"]=y.exports},"597c":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"变更客户","close-on-click-modal":e.flag,visible:e.templateDialog,width:"600px"},on:{"update:visible":function(t){e.templateDialog=t},close:e.closeDia}},[a("el-form",{ref:"ruleFollowForm",attrs:{rules:e.followRules,size:"mini",model:e.followData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"将客户变更给:"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择的顾问",clearable:""},model:{value:e.followData.userId,callback:function(t){e.$set(e.followData,"userId",t)},expression:"followData.userId"}},e._l(e.sysUserPageList,function(e){return a("el-option",{key:e.pkSid,attrs:{label:e.nickname,value:e.pkSid}})}),1)],1),e._v(" "),a("el-form-item",[a("el-checkbox",{model:{value:e.followData.checked,callback:function(t){e.$set(e.followData,"checked",t)},expression:"followData.checked"}},[e._v("短信通知客户")])],1),e._v(" "),a("p",[e._v("尊敬的客户您好：您办理的知识产权业务，原顾问[朱树奇]因工作调整，\n\n      将不能再继续服务。平台为您分配了新的知产顾问：[顾问名]，电话[顾问电话]，\n\n      新的知产顾问将在3个工作日内和您联系，您也可以直接和新顾问取得联系。\n\n      如果您对新顾问不满意，可以联系客服电话，我们会为您更换顾问")])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$emit("update:visible",!1)}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.saveFollowData(e.currentCompanyId)}}},[e._v("保存")])],1)],1)},l=[],s=(a("6b54"),a("90a8")),i={name:"ChangeCustomerDialog",props:{visible:{type:Boolean,default:!1},currentCompanyId:{type:String,default:""},sysUserPageList:{type:Array,default:null}},data:function(){return{flag:!1,templateDialog:!1,followData:{},latentUserList:[],uploadUrl:"http://192.168.91.112:8001/api/v1/common/upload",uploadFilePicList:[],getLatentUserParam:{start:1,length:50,companyId:null},followRules:{followType:[{required:!0,message:"请选择跟进方式",trigger:"blur"}],contactFlag:[{required:!0,message:"请选择是否联系",trigger:"blur"}],customWorth:[{required:!0,message:"请选择客户价值",trigger:"blur"}]},dialogImageUrl:"",dialogVisible:!1,checked:!1}},watch:{visible:{handler:function(e,t){this.templateDialog=e},deep:!0,immediate:!0},"followData.userId":{handler:function(e,t){},deep:!0,immediate:!0}},methods:{closeDia:function(){this.$emit("update:visible",!1),this.followData={}},saveFollowData:function(e){var t=this;t.followData.companyId=t.currentCompanyId,t.$refs["ruleFollowForm"].validate(function(e){e?Object(s["b"])(t.followData).then(function(e){1e4===e.data.code?(t.$message.success(e.data.message),t.$emit("fetchData"),t.closeDia()):t.$message.error(e.data.message)}).catch(function(e){t.$message.error(e.toString())}):t.$message.error("请填写跟进信息")})}}},r=i,o=(a("7da1"),a("2877")),c=Object(o["a"])(r,n,l,!1,null,"82048c86",null);t["a"]=c.exports},"7da1":function(e,t,a){"use strict";var n=a("2e4e"),l=a.n(n);l.a},"90a8":function(e,t,a){"use strict";a.d(t,"i",function(){return l}),a.d(t,"h",function(){return s}),a.d(t,"k",function(){return i}),a.d(t,"g",function(){return r}),a.d(t,"d",function(){return o}),a.d(t,"b",function(){return c}),a.d(t,"c",function(){return u}),a.d(t,"l",function(){return d}),a.d(t,"m",function(){return p}),a.d(t,"a",function(){return m}),a.d(t,"o",function(){return f}),a.d(t,"e",function(){return h}),a.d(t,"j",function(){return g}),a.d(t,"n",function(){return b}),a.d(t,"f",function(){return v});var n=a("b775");function l(e){return Object(n["a"])({url:"/zgCompany/all/condition/pager",method:"post",params:e})}function s(){return Object(n["a"])({baseURL:"http://192.168.91.112:10006/api/v1/sysDept/getDeptTreeListBySysId",method:"get"})}function i(e){return Object(n["a"])({baseURL:"http://192.168.91.112:10006/api/v1/sysUser/getSysUserListByDeptIds",method:"post",data:e})}function r(){return Object(n["a"])({baseURL:"http://192.168.91.112:10006/api/v1/sysUser/getCurrentUserDeptUsers",method:"get"})}function o(e){return Object(n["a"])({url:"/zgCompany/collectCompanyToOther",method:"post",params:e})}function c(e){return Object(n["a"])({url:"/zgCompany/changeCompanyToOther",method:"post",params:e})}function u(e){return Object(n["a"])({url:"/zgCompany/checkCompany",method:"post",params:e})}function d(e){return Object(n["a"])({url:"/zgUserPrivate/condition",method:"post",params:e})}function p(e){return Object(n["a"])({url:"/tag/all/list",method:"post",params:e})}function m(e){return Object(n["a"])({url:"/tag/save",method:"post",params:e})}function f(e){return Object(n["a"])({url:"/tag/update",method:"post",params:e})}function h(e){return Object(n["a"])({url:"/tag/delete",method:"post",params:e})}function g(e){return Object(n["a"])({baseURL:"http://data.zhiguoguo.net/parent/info",method:"post",params:e})}function b(e){return Object(n["a"])({baseURL:"http://data.zhiguoguo.net/trade/mark/info",method:"post",params:e})}function v(e){return Object(n["a"])({baseURL:"http://data.zhiguoguo.net/commerce/info",method:"post",params:e})}},a338:function(e,t,a){"use strict";var n=a("c61e"),l=a.n(n);l.a},c61e:function(e,t,a){},cc64:function(e,t,a){"use strict";var n=a("dd16"),l=a.n(n);l.a},dd16:function(e,t,a){},ff92:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"分配顾问","close-on-click-modal":e.flag1,visible:e.templateDialog,width:"600px"},on:{"update:visible":function(t){e.templateDialog=t},close:e.closeDia}},[a("el-form",{ref:"ruleFollowForm",attrs:{rules:e.followRules,size:"mini",model:e.followData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"部门名称:"}},[a("el-cascader",{attrs:{props:e.propsDeptId,options:e.searchData.deptTreeList,"show-all-levels":!1,clearable:"",placeholder:"请选择部门"},on:{change:e.handleDeptTree},model:{value:e.selectDeptId,callback:function(t){e.selectDeptId=t},expression:"selectDeptId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"顾问名称:"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择顾问名称",clearable:""},model:{value:e.followData.userId,callback:function(t){e.$set(e.followData,"userId",t)},expression:"followData.userId"}},e._l(e.userList,function(e){return a("el-option",{key:e.pkSid,attrs:{label:e.nickname,value:e.pkSid}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$emit("update:visible",!1)}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.saveFollowData(e.currentCompanyId)}}},[e._v("保存")])],1)],1)},l=[],s=(a("6b54"),a("90a8")),i={name:"AssignConsultantsDialog",props:{visible:{type:Boolean,default:!1},currentCompanyId:{type:String,default:""},searchData:{type:Object,default:null}},data:function(){return{flag1:!1,templateDialog:!1,followData:{userId:null},followRules:{followType:[{required:!0,message:"请选择跟进方式",trigger:"blur"}],contactFlag:[{required:!0,message:"请选择是否联系",trigger:"blur"}],customWorth:[{required:!0,message:"请选择客户价值",trigger:"blur"}]},selectDeptId:[],propsDeptId:{label:"deptName",value:"pkSid",children:"children",checkStrictly:!0},userList:[]}},watch:{visible:{handler:function(e,t){this.templateDialog=e},deep:!0,immediate:!0},"searchData.sysUserPageList":{handler:function(e,t){this.userList=e},deep:!0,immediate:!0}},methods:{handleDeptTree:function(e){e.length>0?(this.getSysUserPage(e.slice(e.length-1)),this.followData.deptIds=e.slice(e.length-1).toString()):(this.userList=this.searchData.sysUserPageList,this.followData.userId=null)},getSysUserPage:function(e){var t=this;Object(s["k"])({deptList:e}).then(function(e){t.userList=e.data.data,t.followData.userId=null}).catch(function(e){console.log("err",e)})},closeDia:function(){this.$emit("update:visible",!1),this.followData={}},saveFollowData:function(e){this.followData.companyId=this.currentCompanyId;var t=this;t.$refs["ruleFollowForm"].validate(function(e){e?Object(s["d"])(t.followData).then(function(e){1e4===e.data.code?(t.$message.success(e.data.message),t.$emit("fetchData"),t.closeDia()):t.$message.error(e.data.message)}).catch(function(e){t.$message.error(e.toString())}):t.$message.error("请填写跟进信息")})}}},r=i,o=(a("a338"),a("2877")),c=Object(o["a"])(r,n,l,!1,null,"145a6d95",null);t["a"]=c.exports}}]);