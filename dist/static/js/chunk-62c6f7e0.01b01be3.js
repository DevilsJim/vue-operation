(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62c6f7e0"],{2179:function(t,e,a){"use strict";var n=a("40ce"),s=a.n(n);s.a},"27cf":function(t,e,a){},"40ce":function(t,e,a){},"52a9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeTabsName,callback:function(e){t.activeTabsName=e},expression:"activeTabsName"}},[a("el-tab-pane",{attrs:{label:"组内线索",name:"0"}},[a("clues-list-table",{attrs:{"list-data":t.listData,"search-data":t.searchData,"active-tabs-name":t.activeTabsName,"dept-array":t.deptArray,"counselor-array":t.counselorArray},on:{fetchData:t.fetchData}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"公共线索",name:"1"}},[a("public-clues-list-table",{attrs:{"list-data":t.listData,"active-tabs-name":t.activeTabsName},on:{fetchData:t.fetchData}})],1)],1)],1)},s=[],r=(a("ac6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"customer-list-table"},[a("el-form",{attrs:{inline:!0,model:t.formInline,size:"small"}},[a("el-form-item",[a("el-select",{attrs:{value:"",filterable:"",placeholder:"请选择的部门",clearable:""},on:{change:function(e){return t.handleDeptTree(t.formInline.dept)}},model:{value:t.formInline.dept,callback:function(e){t.$set(t.formInline,"dept",e)},expression:"formInline.dept"}},t._l(t.searchData.deptTreeList,function(t){return a("el-option",{key:t.pkSid,attrs:{label:t.deptName,value:t.pkSid}})}),1)],1),t._v(" "),a("el-form-item",[a("el-select",{attrs:{value:"",filterable:"",placeholder:"请选择的顾问",clearable:""},model:{value:t.formInline.sysUserId,callback:function(e){t.$set(t.formInline,"sysUserId",e)},expression:"formInline.sysUserId"}},t._l(t.userList,function(t){return a("el-option",{key:t.pkSid,attrs:{label:t.userName,value:t.pkSid}})}),1)],1),t._v(" "),a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"请选择线索状态"},model:{value:t.formInline.threadStatus,callback:function(e){t.$set(t.formInline,"threadStatus",e)},expression:"formInline.threadStatus"}},[a("el-option",{attrs:{label:"可用",value:"11"}}),t._v(" "),a("el-option",{attrs:{label:"已转化",value:"5"}}),t._v(" "),a("el-option",{attrs:{label:"已关闭",value:"2"}})],1)],1),t._v(" "),a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"请选择线索来源"},model:{value:t.formInline.threadSource,callback:function(e){t.$set(t.formInline,"threadSource",e)},expression:"formInline.threadSource"}},[a("el-option",{attrs:{label:"顾问录入",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"第三方数据",value:"1"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success",icon:"el-icon-search",size:"mini"},on:{click:t.onSubmit}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini"},on:{click:t.onReset}},[t._v("重置")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listData.listLoading,expression:"listData.listLoading"}],attrs:{data:t.listData.list,"element-loading-text":"Loading",fit:"",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"所在部门",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.deptIdToName(e.row.dept)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"负责人",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.userIdToName(e.row.sysUserId)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"公司名称",width:"200","class-name":"company-name",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{path:"/resourceManagement/cluesDetail/"+e.row.threadId}}},[a("div",{staticClass:"name"},[t._v(t._s(e.row.companyName))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"当前状态",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.threadStatusName))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"联系人",width:"130","class-name":"user-info",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"user-name"},[t._v(" "+t._s(e.row.nickname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"公司地址",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.companyAddress))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"线索备注",width:"170",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.threadRemark))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"初始来源",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.threadSource))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"动态记录",prop:"dynamicInfo",width:"160",align:"center",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.dynamicInfo))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"收录时间","min-width":"160",align:"center",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.createTime))]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.listData.start,"page-size":t.listData.length,layout:"total, sizes, prev, pager, next, jumper",total:t.listData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)}),l=[],i=a("90a8"),o={inject:["reload"],name:"CluesListTable",props:{listData:{type:Object,default:null},searchData:{type:Object,default:null},dialogVisible:{type:Object,default:null},activeTabsName:{type:String,default:null},deptArray:{type:Array,default:null},counselorArray:{type:Array,default:null}},data:function(){return{propsDeptId:{label:"deptName",value:"pkSid",children:"children",checkStrictly:!0},formInline:{start:"1",length:"10",dept:null,sysUserId:null},sourceId:0,cluesData:{},createdCluesVisible:!1,cluesToCustomerVisible:!1,closeCluesVisible:!1,cluesId:"",selectDeptId:[],userList:[],endNodeDeptIds:[]}},watch:{listData:{handler:function(t){this.list=t.list},deep:!0,immediate:!0},"searchData.sysUserPageList":{handler:function(t){this.userList=t},deep:!0,immediate:!0}},methods:{handleDeptTree:function(t){t?(this.getSysUserPage(t),this.formInline.dept=t):(this.userList=this.searchData.sysUserPageList,this.formInline.sysUserId=null)},getSysUserPage:function(t){var e=this;Object(i["k"])({deptList:[t]}).then(function(t){e.userList=t.data.data,e.formInline.sysUserId=null}).catch(function(t){console.log("err",t)})},deptIdToName:function(t){if(this.deptArray[t])return this.deptArray[t].deptName},userIdToName:function(t){if(this.counselorArray[t])return this.counselorArray[t].userName},onSubmit:function(){this.formInline.deptIds=this.deptIdsVisible,this.$message.success("搜索成功!"),this.$emit("fetchData",this.formInline)},onReset:function(){this.formInline={start:"1",length:"10",dept:null,sysUserId:null},this.$message("重置搜索项!")},handleSizeChange:function(t){console.log("每页 ".concat(t," 条")),this.$set(this.formInline,"length",t),this.$emit("fetchData",this.formInline)},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.$set(this.formInline,"start",t),this.$emit("fetchData",this.formInline)}}},c=o,u=(a("5e8e"),a("2877")),d=Object(u["a"])(c,r,l,!1,null,"db9b09ee",null),h=d.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"customer-list-table"},[a("el-form",{attrs:{inline:!0,model:t.formInline,size:"small"}},[a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"请选择线索来源"},model:{value:t.formInline.threadSource,callback:function(e){t.$set(t.formInline,"threadSource",e)},expression:"formInline.threadSource"}},[a("el-option",{attrs:{label:"顾问录入",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"第三方数据",value:"1"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success",icon:"el-icon-search",size:"mini"},on:{click:t.onSubmit}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini"},on:{click:t.onReset}},[t._v("重置")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listData.listLoading,expression:"listData.listLoading"}],attrs:{data:t.listData.list,"element-loading-text":"Loading",fit:"",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"公司名称",width:"250","class-name":"company-name",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{path:"/resourceManagement/cluesDetail/"+e.row.threadId}}},[a("div",{staticClass:"name"},[t._v(t._s(e.row.companyName))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"当前状态",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.status))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"联系人",width:"152","class-name":"user-info",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"user-name"},[t._v(" "+t._s(e.row.nickname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"公司地址",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.companyAddress))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"线索备注",width:"170",align:"center",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.threadRemark))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"初始来源",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.threadSource))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"动态记录",prop:"dynamicInfo",width:"300",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.dynamicInfo))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"收录时间",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.createTime))]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.listData.start,"page-size":t.listData.length,layout:"total, sizes, prev, pager, next, jumper",total:t.listData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},m=[],p={inject:["reload"],name:"PublicCluesListTable",props:{listData:{type:Object,default:null},searchData:{type:Object,default:null},dialogVisible:{type:Object,default:null},activeTabsName:{type:String,default:null}},data:function(){return{propsDeptId:{label:"deptName",value:"pkSid",children:"children",checkStrictly:!0},formInline:{start:"1",length:"10",deleteStatus:"0"},sourceId:0,cluesData:{},createdCluesVisible:!1,cluesToCustomerVisible:!1,closeCluesVisible:!1,cluesId:""}},watch:{listData:{handler:function(t,e){this.list=t.list},deep:!0,immediate:!0},"searchData.sysUserPageList":{handler:function(t,e){this.userList=t},deep:!0,immediate:!0}},methods:{onSubmit:function(){this.formInline.deptIds=this.deptIdsVisible,this.$message.success("搜索成功!"),this.$emit("fetchData",this.formInline)},onReset:function(){this.formInline={start:"1",length:"10",deleteStatus:"0"},this.$message("重置搜索项!")},handleSizeChange:function(t){console.log("每页 ".concat(t," 条")),this.$set(this.formInline,"length",t),this.$emit("fetchData",this.formInline)},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.$set(this.formInline,"start",t),this.$emit("fetchData",this.formInline)}}},b=p,g=(a("2179"),Object(u["a"])(b,f,m,!1,null,"5dde193e",null)),v=g.exports,_=a("e7cd"),y={name:"Index",components:{PublicCluesListTable:v,CluesListTable:h},data:function(){return{activeTabsName:"0",formInline:{start:"1",length:"10"},listData:{list:[],listLoading:!0,total:0},currentPage4:4,searchData:{deptTreeList:[],sysUserPageList:[]},endNodeDeptIds:[],deptTreeMap:[],deptArray:[],counselorArray:[]}},watch:{activeTabsName:{handler:function(t,e){this.fetchData()},deep:!0,immediate:!0}},created:function(){this.init()},methods:{init:function(){this.getDeptTree(),this.getCurUserPage()},getDeptTree:function(t){var e=this,a=this;Object(i["h"])().then(function(t){1e4===t.data.code?null!==t.data.data&&(e.forEachDept(t.data.data),a.$set(a.searchData,"deptTreeList",e.deptTreeMap)):a.$message.warning(t.data.message)}).catch(function(t){console.log("err",t)})},handleTabs:function(t){this.formInline.needApprove=String(this.activeTabsName),this.fetchData()},forEachDept:function(t){var e=this;t.length>0&&t.forEach(function(t,a){e.deptTreeMap.push({pkSid:t.pkSid,deptName:t.deptName}),e.deptArray[t.pkSid]={pkSid:t.pkSid,deptName:t.deptName},null!=t.children&&e.forEachDept(t.children)})},forEachUser:function(t){var e=this;t.length>0&&t.forEach(function(t,a){e.counselorArray[t.pkSid]={pkSid:t.pkSid,userName:t.nickname}})},getCurUserPage:function(t){var e=this,a=this;Object(i["g"])().then(function(t){1e4===t.data.code&&null!==t.data.data?null!=t.data.data&&(e.forEachUser(t.data.data),e.$set(e.searchData,"sysUserPageList",t.data.data)):a.$message.warning(t.data.message)}).catch(function(t){console.log("err",t)})},fetchData:function(t){var e=this;"undefined"!==typeof t&&(this.formInline=t),this.$set(this.listData,"listLoading",!1),"0"===this.activeTabsName&&Object(_["getGroupThreadList"])(this.formInline).then(function(t){e.listData.list=t.data.data,e.listData.total=t.data.total,e.listData.start=t.data.start,e.listData.length=t.data.length,e.listData.listLoading=!1}).catch(function(t){console.log("err",t)}),"1"===this.activeTabsName&&Object(_["getCommonCluesList"])(this.formInline).then(function(t){e.listData.list=t.data.data,e.listData.total=t.data.total,e.listData.start=t.data.start,e.listData.length=t.data.length,e.listData.listLoading=!1}).catch(function(t){console.log("err",t)})},handleSizeChange:function(t){console.log("每页 ".concat(t," 条"))},handleCurrentChange:function(t){console.log("当前页: ".concat(t))}}},I=y,D=Object(u["a"])(I,n,s,!1,null,"03e0dd16",null);e["default"]=D.exports},"5e8e":function(t,e,a){"use strict";var n=a("27cf"),s=a.n(n);s.a},"90a8":function(t,e,a){"use strict";a.d(e,"i",function(){return s}),a.d(e,"h",function(){return r}),a.d(e,"k",function(){return l}),a.d(e,"g",function(){return i}),a.d(e,"d",function(){return o}),a.d(e,"b",function(){return c}),a.d(e,"c",function(){return u}),a.d(e,"l",function(){return d}),a.d(e,"m",function(){return h}),a.d(e,"a",function(){return f}),a.d(e,"o",function(){return m}),a.d(e,"e",function(){return p}),a.d(e,"j",function(){return b}),a.d(e,"n",function(){return g}),a.d(e,"f",function(){return v});var n=a("b775");function s(t){return Object(n["a"])({url:"/zgCompany/all/condition/pager",method:"post",params:t})}function r(){return Object(n["a"])({baseURL:"http://192.168.91.112:10006/api/v1/sysDept/getDeptTreeListBySysId",method:"get"})}function l(t){return Object(n["a"])({baseURL:"http://192.168.91.112:10006/api/v1/sysUser/getSysUserListByDeptIds",method:"post",data:t})}function i(){return Object(n["a"])({baseURL:"http://192.168.91.112:10006/api/v1/sysUser/getCurrentUserDeptUsers",method:"get"})}function o(t){return Object(n["a"])({url:"/zgCompany/collectCompanyToOther",method:"post",params:t})}function c(t){return Object(n["a"])({url:"/zgCompany/changeCompanyToOther",method:"post",params:t})}function u(t){return Object(n["a"])({url:"/zgCompany/checkCompany",method:"post",params:t})}function d(t){return Object(n["a"])({url:"/zgUserPrivate/condition",method:"post",params:t})}function h(t){return Object(n["a"])({url:"/tag/all/list",method:"post",params:t})}function f(t){return Object(n["a"])({url:"/tag/save",method:"post",params:t})}function m(t){return Object(n["a"])({url:"/tag/update",method:"post",params:t})}function p(t){return Object(n["a"])({url:"/tag/delete",method:"post",params:t})}function b(t){return Object(n["a"])({baseURL:"http://data.zhiguoguo.net/parent/info",method:"post",params:t})}function g(t){return Object(n["a"])({baseURL:"http://data.zhiguoguo.net/trade/mark/info",method:"post",params:t})}function v(t){return Object(n["a"])({baseURL:"http://data.zhiguoguo.net/commerce/info",method:"post",params:t})}},e7cd:function(t,e,a){"use strict";a.d(e,"c",function(){return s}),a.d(e,"k",function(){return r}),a.d(e,"b",function(){return l}),a.d(e,"j",function(){return i}),a.d(e,"h",function(){return o}),a.d(e,"i",function(){return c}),a.d(e,"a",function(){return u}),a.d(e,"l",function(){return d});var n=a("b775");function s(t){return Object(n["a"])({baseURL:"http://192.168.91.111:8005/api/v1/thread/container/set/condition",method:"post",params:t})}function r(t){return Object(n["a"])({baseURL:"http://192.168.91.111:8005/api/v1/thread/container/set/update",method:"post",params:t})}function l(t){return Object(n["a"])({baseURL:"http://192.168.91.111:8005/api/v1/thread/collection/set/condition",method:"post",params:t})}function i(t){return Object(n["a"])({baseURL:"http://192.168.91.111:8005/api/v1/thread/collection/set/update",method:"post",params:t})}function o(t){return Object(n["a"])({baseURL:"http://192.168.91.111:8005/api/v1/businessPrivateLimit/detail",method:"post",params:t})}function c(t){return Object(n["a"])({baseURL:"http://192.168.91.111:8005/api/v1/businessPrivateLimit/update",method:"post",params:t})}function u(t){return Object(n["a"])({baseURL:"http://192.168.91.111:8005/api/v1/businessOvertime/condition",method:"post",params:t})}function d(t){return Object(n["a"])({baseURL:"http://192.168.91.111:8005/api/v1/businessOvertime/update",method:"post",data:t})}}}]);